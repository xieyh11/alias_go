# 这是对本实验代码部分解释，主要解释地址匹配实验部分

## 代码功能分组

* buildtree: 构建映射表，用于别名映射，映射表是利用树结构存储的，本模块就是基于数据源和可能存在的映射关系，构建相应的映射表，但是在地址实验中，映射表并没有实际意义，因此，该功能主要用于维护用于查询的地址条目。
* floatvector: 一些用于float数组的操作，比如加、内积，同时将float数据转为字符串表示。
* maptree: 映射表的树结构体。
* nlphelper: 一个接口用于分词和获取词向量，有jieba分词、nlp分词，地址实验中，高德地图结果的处理也在这一部分，在map分词中，基于原有地址字符串，并结合高德搜索结果，进行行政区划、街道分词。
* searchtree: 多线程搜索，在映射表中，利用多线程进行结果匹配。
* stringhelper: 一些字符串的功能函数，比如字符串去除中英文标点符号，将string表示的float数组解释成float数组。
* strsim: 用于字符串匹配的方法，包括字符串相似度计算方法以及地址匹配的特殊匹配方法。
* build.go: 用于基于csv文件构建映射表，并dump成文本文件用于持久化存储，同时校验文件。
* searchMap.go: 用于搜索searchMap.txt中的每一行地址，并打印每一行地址对应top20的匹配结果以及分数。

## 地址分词部分

这一部分代码在nlphelper模块的gaode模块中，主要是基于高德地图的结果对地址做分词。首先，原有地址在高德搜索，得到搜索结果，并依据搜索结果对原有地址进行补全分词，使用高德的行政区划作为行政区划分词，并从原有地址串中直接删去行政区划，从原有地址中根据规则找到街道，如果没有在高德结果中找到街道，并提取出相应的街道门牌号码。最后提取其它号码，并将原有地址剩余保留为其它部分用于比对。

## 地址匹配

这一部分代码在strsim模块中，根据分词结果，在行政区划分词一致的情况下，在每个分词段定义权重算出相似分数。